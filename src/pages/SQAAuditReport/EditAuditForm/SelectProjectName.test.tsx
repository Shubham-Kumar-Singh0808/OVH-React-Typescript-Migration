import React from 'react'
import '@testing-library/jest-dom'
import SelectProjectName from './SelectProjectName'
import { fireEvent, render, screen } from '../../../test/testUtils'
import { mockProjectNames } from '../../../test/data/allocateEmployeeData'
import { mockGetAuditDetails } from '../../../test/data/editAuditFormData'

describe('ProjectName Component', () => {
  describe('Empty value of  ProjectName Component', () => {
    beforeEach(() => {
      render(
        <SelectProjectName
          projects={mockProjectNames}
          setSelectProjectId={jest.fn()}
          projectValue={mockGetAuditDetails.projectName}
        />,
        {
          preloadedState: {
            allocateEmployee: {
              getAllProjects: mockProjectNames,
            },
            addNewAuditForm: {
              editAuditFormDetails: mockGetAuditDetails,
            },
          },
        },
      )
    })

    test('should be able to render Project Component Title', () => {
      expect(screen.getByText('Project Name:')).toBeInTheDocument()
    })

    test('should be able to render ProjectName Component label', () => {
      expect(screen.getByTestId('pmLabel')).toBeTruthy()
    })

    test('should be able to render ProjectName Component placeholder', () => {
      expect(screen.getByRole('combobox')).toBeInTheDocument()
    })
    test('should be able to enter in input field', () => {
      const input = screen.getByPlaceholderText('Project Name')
      expect(input).toHaveValue('')
    })

    test('should be able to call onChange', () => {
      const input = screen.getByRole('combobox')
      fireEvent.change(input, 'Vinesh')
      expect(input).toHaveValue('')
    })
    test('should be able to call onSelect', () => {
      const input = screen.getByRole('combobox')

      fireEvent.select(input, 'Vinesh')
      expect(input).toHaveValue('')
    })
  })
})
